<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 Teste Funcional do Namespace</title>
</head>
<body>
    <h1>🧪 Teste das Funções do Namespace</h1>
    <div id="resultado" style="font-family: monospace; white-space: pre-line; padding: 20px; border: 1px solid #ddd;"></div>

    <script src="src/main.js"></script>

    <script>
        const resultado = document.getElementById('resultado');
        let logs = [];
        
        function addLog(msg) {
            logs.push(msg);
            resultado.textContent = logs.join('\n');
            console.log(msg);
        }

        setTimeout(() => {
            addLog('🧪 TESTE FUNCIONAL: Testando funções do namespace...');
            
            if (typeof window.SENT1_AUTO === 'object') {
                addLog(`✅ Namespace encontrado: ${window.SENT1_AUTO.status}`);
                addLog('');
                
                // Teste 1: traduzirStatusSessao
                try {
                    const resultado1 = window.SENT1_AUTO.traduzirStatusSessao('INCLUÍDO EM PAUTA');
                    addLog(`🧪 TESTE 1 - traduzirStatusSessao('INCLUÍDO EM PAUTA'):`);
                    addLog(`   ✅ Resultado: ${JSON.stringify(resultado1)}`);
                } catch (e) {
                    addLog(`🧪 TESTE 1 - ❌ Erro: ${e.message}`);
                }
                
                addLog('');
                
                // Teste 2: extrairDadosCardSessaoGlobal
                try {
                    const textoTeste = '25/07/2024 - INCLUÍDO EM PAUTA - Apelação Cível (12345)';
                    const resultado2 = window.SENT1_AUTO.extrairDadosCardSessaoGlobal(textoTeste);
                    addLog(`🧪 TESTE 2 - extrairDadosCardSessaoGlobal():`);
                    addLog(`   📝 Input: "${textoTeste}"`);
                    addLog(`   ✅ Resultado: ${JSON.stringify(resultado2)}`);
                } catch (e) {
                    addLog(`🧪 TESTE 2 - ❌ Erro: ${e.message}`);
                }
                
                addLog('');
                
                // Teste 3: detectarCardSessaoSimplificado
                try {
                    const resultado3 = window.SENT1_AUTO.detectarCardSessaoSimplificado();
                    addLog(`🧪 TESTE 3 - detectarCardSessaoSimplificado():`);
                    addLog(`   ✅ Resultado: ${resultado3}`);
                } catch (e) {
                    addLog(`🧪 TESTE 3 - ❌ Erro: ${e.message}`);
                }
                
                addLog('');
                
                // Teste 4: testarDeteccaoRobusta
                try {
                    const resultado4 = window.SENT1_AUTO.testarDeteccaoRobusta();
                    addLog(`🧪 TESTE 4 - testarDeteccaoRobusta():`);
                    addLog(`   ✅ Resultado: ${resultado4}`);
                } catch (e) {
                    addLog(`🧪 TESTE 4 - ❌ Erro: ${e.message}`);
                }
                
                addLog('');
                
                // Teste 5: diagnosticarEstruturaDOMMinutas
                try {
                    const resultado5 = window.SENT1_AUTO.diagnosticarEstruturaDOMMinutas();
                    addLog(`🧪 TESTE 5 - diagnosticarEstruturaDOMMinutas():`);
                    addLog(`   ✅ Resultado: ${resultado5}`);
                } catch (e) {
                    addLog(`🧪 TESTE 5 - ❌ Erro: ${e.message}`);
                }
                
                addLog('');
                addLog('🎯 RESUMO DOS TESTES:');
                addLog(`📊 Namespace: ${window.SENT1_AUTO.status}`);
                addLog(`🎯 Versão: ${window.SENT1_AUTO.versao}`);
                addLog(`⏰ Timestamp: ${window.SENT1_AUTO.timestamp}`);
                addLog(`📈 Total de propriedades: ${Object.keys(window.SENT1_AUTO).length}`);
                addLog('');
                addLog('🎉 CONCLUSÃO: Sistema de emergência funcionando perfeitamente!');
                addLog('✅ Usuário pode usar as funções críticas mesmo com falhas no script principal');
                
            } else {
                addLog('❌ FALHA: Namespace não encontrado');
            }
        }, 4000); // Aguardar 4 segundos para garantir que o namespace foi criado
    </script>
</body>
</html>
